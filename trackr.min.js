!function(a,b){"use strict";a.Trackr={name:"Trackr",version:"0.0.3",href:jQuery(location).attr("href"),defaults:{youtube:!1,facebook:!1,twitter:{click:!1,tweet:!1,retweet:!1,favorite:!1,follow:!1},trackr:!0},init:function(a){var c=b.extend(!0,{},this.defaults,a);c.trackr===!0&&this.listen(),c.facebook===!0&&this.facebook(),c.youtube===!0&&this.youtube(),(c.twitter.click===!0||c.twitter.tweet===!0||c.twitter.retweet===!0||c.twitter.favorite===!0||c.twitter.follow===!0)&&this.twitter(c)},listen:function(){b(document).on("click","[data-trackr]",function(a){a.stopPropagation(),a.preventDefault();var b=Trackr.collect(this);Trackr.report(b)})},collect:function(a){var c,d=b(a),e=[],f=this.formatTopic(d.data("trackr"));return/^#/.test(d.attr("href"))||(c=d.attr("href")),e[0]=f[0]||void 0,e[1]=f[1]||void 0,e[2]=d.data("trackr-label")||c,e[3]=d.data("trackr-value")||void 0,e[4]=d.data("trackr-nointeract")||!1,e},formatTopic:function(a,b){b=b||":";for(var c=a.replace(/\./g," - ").split(b)||[],d=0;d<c.length;d++)c[d]=this.titleize(c[d]);return c},report:function(b){return b&&void 0!==b[0]&&void 0!==b[1]?(a.console&&console.log("sending data to GA",b),void a.ga("send","event",b[0],b[1],b[2],b[3],b[4])):(a.console&&console.warn('Cannot report event to Google Analytics; required data not passed in. You need to set at minimum a category/action on your link, ie: <a href="http://link.com" data-trackr="category:action">Link.com</a>'),!1)},titleize:function(a){return null===a?"":(a=String(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()}))},facebook:function(){window.fbAsyncInit=this.fbInit},fbInit:function(){FB.Event.subscribe("edge.create",function(b,c){var d=Trackr.collect(c.parentNode);return d&&void 0!==d[0]&&void 0!==d[1]?(a.console&&console.log("sending FB Like: ",d),ga("send","social","facebook","like",d[2]),void ga("send","event","facebook","like",d[2])):(a.console&&console.warn('Cannot report event to Google Analytics; required data not passed in. You need to set at minimum a category/action on your link, ie: <a href="http://link.com" data-trackr="category:action">Link.com</a>'),!1)}),FB.Event.subscribe("edge.remove",function(b,c){var d=Trackr.collect(c.parentNode);return d&&void 0!==d[0]&&void 0!==d[1]?(a.console&&console.log("sending FB Unlike: ",d),ga("send","social","facebook","like",d[2]),void ga("send","event","facebook","like",d[2])):(a.console&&console.warn('Cannot report event to Google Analytics; required data not passed in. You need to wrap your Facebook element in a div with the data-trackr attributes, ie: <div data-trackr="category:action" data-trackr-label="label"><div class="fb-like" data-href="https://www.facebook.com/" data-layou="standard" data-action="like" data-show-faces="true" data-share="true"></div></div>'),!1)})},twitter:function(b){a.twttr.ready(function(a){b.twitter.click===!0&&a.events.bind("click",Trackr.twitterClick),b.twitter.tweet===!0&&a.events.bind("tweet",Trackr.twitterTweet),b.twitter.retweet===!0&&a.events.bind("retweet",Trackr.twitterRetweet),b.twitter.favorite===!0&&a.events.bind("favorite",Trackr.twitterFavorite),b.twitter.follow===!0&&a.events.bind("follow",Trackr.twitterFollow)})},twitterClick:function(b){if(b){var c=Trackr.collect(b.target.parentNode);if(!c||void 0===c[0]||void 0===c[1])return a.console&&console.warn('Cannot report event to Google Analytics; required data not passed in. You need to wrap your Twitter element in a div with the data-trackr attributes, ie: <div data-trackr="category:action" data-trackr-label="label"><a href="https://twitter.com" class="twitter-share-button" data-url="http://www.liftinteractive.com">Tweet</a></div>'),!1;a.console&&console.log("twitterClick data: ",c),ga("send","event",{eventCategory:c[0],eventAction:c[1],eventLabel:c[2],eventValue:c[3]})}},twitterTweet:function(b){if(b){var c=Trackr.collect(b.target.parentNode);if(!c||void 0===c[0]||void 0===c[1])return a.console&&console.warn('Cannot report event to Google Analytics; required data not passed in. You need to wrap your Twitter element in a div with the data-trackr attributes, ie: <div data-trackr="category:action" data-trackr-label="label"><a href="https://twitter.com" class="twitter-share-button" data-url="http://www.liftinteractive.com">Tweet</a></div>'),!1;a.console&&console.log("Tweet Sent: ",c),ga("send","event",{eventCategory:"Tweet Sent",eventAction:c[1],eventLabel:c[2],eventValue:c[3]}),ga("send",{hitType:"social",socialNetwork:"Twitter",socialAction:"Tweet",socialTarget:document.title,page:Trackr.href})}},twitterRetweet:function(b){if(b){var c=Trackr.collect(b.target.parentNode);if(!c||void 0===c[0]||void 0===c[1])return a.console&&console.warn('Cannot report event to Google Analytics; required data not passed in. You need to wrap your Twitter element in a div with the data-trackr attributes, ie: <div data-trackr="category:action" data-trackr-label="label"><a href="https://twitter.com" class="twitter-share-button" data-url="http://www.liftinteractive.com">Tweet</a></div>'),!1;a.console&&console.log("Retweet: ",c),ga("send","event",{eventCategory:"Retweeted",eventAction:c[1],eventLabel:c[2],eventValue:c[3]}),ga("send",{hitType:"social",socialNetwork:"Twitter",socialAction:"Retweet",socialTarget:document.title,page:Trackr.href})}},twitterFavorite:function(b){if(b){var c=Trackr.collect(b.target.parentNode);if(!c||void 0===c[0]||void 0===c[1])return a.console&&console.warn('Cannot report event to Google Analytics; required data not passed in. You need to wrap your Twitter element in a div with the data-trackr attributes, ie: <div data-trackr="category:action" data-trackr-label="label"><a href="https://twitter.com" class="twitter-share-button" data-url="http://www.liftinteractive.com">Tweet</a></div>'),!1;a.console&&console.log("Twitter Favorited: ",c),ga("send","event",{eventCategory:"Twitter Favorite",eventAction:c[1],eventLabel:c[2],eventValue:c[3]}),ga("send",{hitType:"social",socialNetwork:"Twitter",socialAction:"Favorite",socialTarget:document.title,page:Trackr.href})}},twitterFollow:function(b){if(console.log("twitter follow"),b){var c=Trackr.collect(b.target.parentNode);if(!c||void 0===c[0]||void 0===c[1])return a.console&&console.warn('Cannot report event to Google Analytics; required data not passed in. You need to wrap your Twitter element in a div with the data-trackr attributes, ie: <div data-trackr="category:action" data-trackr-label="label"><a href="https://twitter.com" class="twitter-share-button" data-url="http://www.liftinteractive.com">Tweet</a></div>'),!1;a.console&&console.log("Retweet: ",c),ga("send","event",{eventCategory:"Twitter Follow",eventAction:c[1],eventLabel:c[2],eventValue:c[3]}),ga("send",{hitType:"social",socialNetwork:"Twitter",socialAction:"Follow",socialTarget:document.title,page:Trackr.href})}},youtube:function(){if(a.YT)a.onYouTubeIframeAPIReady=this.onYouTubeIframeAPIReady;else{a.console&&console.log("YouTube api is non-existant. Injecting API.");var b=document.createElement("script"),c=document.getElementsByTagName("script")[0];b.src="//www.youtube.com/iframe_api",b.async=!0,c.parentNode.insertBefore(b,c),b.onload=function(){a.onYouTubeIframeAPIReady=Trackr.onYouTubeIframeAPIReady}}},onYouTubeIframeAPIReady:function(){for(var a=document.getElementsByTagName("iframe"),b=a.length;b--;)/youtube.com\/embed/.test(a[b].src)&&new YT.Player(a[b],{events:{onReady:function(){},onStateChange:function(a){var b=a.target.getVideoData();if(a.data===YT.PlayerState.PLAYING){ga("send","event",{eventCategory:"YouTube",eventAction:"Play",eventLabel:b.title+" : "+a.target.getVideoUrl()});var c=function(a){var d=a.getDuration()-a.getCurrentTime()<=1.5?1:(Math.floor(a.getCurrentTime()/a.getDuration()*4)/4).toFixed(2);(!a.lastP||d>a.lastP)&&(a.lastP=d,console.log("played: "+(100*d+"%")),ga("send","event",{eventCategory:"YouTube",eventAction:"Percentage",eventLabel:b.title+" : "+(100*d+"%"),eventValue:100*d})),1!==a.lastP&&setTimeout(c,1e3,a)};setTimeout(c,1e3,a.target)}a.data===YT.PlayerState.PAUSED&&ga("send","event",{eventCategory:"YouTube",eventAction:"Pause",eventLabel:b.title+" : "+a.target.getVideoUrl()}),a.data===YT.PlayerState.ENDED&&ga("send","event",{eventCategory:"YouTube",eventAction:"Completed",eventLabel:b.title+" : "+a.target.getVideoUrl()})},onError:function(a){var b=a.target.getVideoData();ga("send","event",{eventCategory:"YouTube",eventAction:"Error",eventLabel:b.title+" : "+a.target.getVideoUrl()})}}})}},b.fn.trackr=function(b){return a.ga?void Trackr.init(b):(window.console&&console.log("Google Analytics Universal does not exist"),!1)}}(window,window.jQuery);